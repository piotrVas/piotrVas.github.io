(function(e){function r(r){for(var s,o,i=r[0],u=r[1],c=r[2],d=0,p=[];d<i.length;d++)o=i[d],a[o]&&p.push(a[o][0]),a[o]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(e[s]=u[s]);l&&l(r);while(p.length)p.shift()();return n.push.apply(n,c||[]),t()}function t(){for(var e,r=0;r<n.length;r++){for(var t=n[r],s=!0,i=1;i<t.length;i++){var u=t[i];0!==a[u]&&(s=!1)}s&&(n.splice(r--,1),e=o(o.s=t[0]))}return e}var s={},a={app:0},n=[];function o(r){if(s[r])return s[r].exports;var t=s[r]={i:r,l:!1,exports:{}};return e[r].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=e,o.c=s,o.d=function(e,r,t){o.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,r){if(1&r&&(e=o(e)),8&r)return e;if(4&r&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var s in e)o.d(t,s,function(r){return e[r]}.bind(null,s));return t},o.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(r,"a",r),r},o.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=r,i=i.slice();for(var c=0;c<i.length;c++)r(i[c]);var l=u;n.push([0,"chunk-vendors"]),t()})({0:function(e,r,t){e.exports=t("56d7")},"034f":function(e,r,t){"use strict";var s=t("64a9"),a=t.n(s);a.a},"0747":function(e,r,t){},"1cab":function(e,r,t){},"56d7":function(e,r,t){"use strict";t.r(r);t("cadf"),t("551c"),t("f751"),t("097d");var s,a,n=t("2b0e"),o=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"wrap-login"},[e._m(0),t("div",{staticClass:"login-window"},[e._m(1),t("div",{staticClass:"login-content"},[t("form",{staticClass:"margin-bottom-0",attrs:{method:"POST"}},[t("div",{staticClass:"form-group m-b-20"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.username,expression:"user.username"},{name:"validate",rawName:"v-validate",value:{required:!0,regex:/^[a-zA-Z]+$/,min:4,max:20},expression:"{required:true, regex: /^[a-zA-Z]+$/, min: 4, max: 20}"}],staticClass:"input form-control",attrs:{id:"username",type:"text",name:"username",placeholder:"Username"},domProps:{value:e.user.username},on:{input:function(r){r.target.composing||e.$set(e.user,"username",r.target.value)}}}),t("span",[e._v(e._s(e.errors.first("username"))),e.errors.first("username")?t("i",[e._v(" (latin letters only)")]):e._e()])]),t("div",{staticClass:"form-group m-b-20"},[t("vue-password",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,regex:/(?=.*[0-9])(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z!@#$%^&*]{8,}/},expression:"{required:true, regex:/(?=.*[0-9])(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z!@#$%^&*]{8,}/}"}],attrs:{name:"password",id:"password",disableStrength:!0,classes:"input form-control","user-inputs":[e.user.username],placeholder:"Password"},model:{value:e.user.password,callback:function(r){e.$set(e.user,"password",r)},expression:"user.password"}}),t("span",[e._v(e._s(e.errors.first("password"))),e.errors.first("password")?t("i",[e._v(' (latin letters only, e.g: "aA!@#$%^&*123"; and not less 8 charts)')]):e._e()])],1),t("div",{staticClass:"login-buttons"},[t("button",{staticClass:"btn btn-dark btn-block btn-lg",attrs:{type:"button",disabled:e.reload},on:{click:e.onSubmit}},[e.reload?t("i",{staticClass:"fa fa-spinner fa-pulse"}):t("span",{staticClass:"title-btn"},[e._v("Sign me in")])])])])])])])},i=[function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"cover"},[t("div",{staticClass:"login-image cover-image"}),t("div",{staticClass:"cover-bg"})])},function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"login-header"},[t("h1",[e._v("Login User Table")])])}],u=(t("96cf"),t("3b8d")),c=t("3c29"),l=t.n(c),d=t("0b26"),p=t.n(d),f={components:{VuePassword:c["VuePassword"]},computed:{reload:function(){return this.$store.getters.reload}},data:function(){return{user:{username:"",password:""}}},methods:{onSubmit:function(e){var r=this;e.preventDefault(),this.$validator.validate().then(function(e){if(e){r.$store.dispatch("getReload",!0);var t={username:r.user.username,password:r.user.password};t.password=p()(t.password),r.checkOrCreateUserInLocal(t)}else r.store.dispatch("setError","Not valid form")})},checkOrCreateUserInLocal:function(e){var r,t=this;if(this.$store.dispatch("clearError"),!localStorage[e.username])return this.$store.dispatch("checkUserInDB",e).then(function(r){!0===r?(t.createUserLocal(e),t.setDelayAndRoute(!0)):(t.createUserLocal(e),t.$store.dispatch("createUser",e).then(function(){return t.setDelayAndRoute(!0)}))}),!0;r=JSON.parse(localStorage[e.username]),e.username===r.username&&e.password===r.password?(this.checkLocalUserInDB(e),this.setDelayAndRoute(!0)):e.username===r.username&&e.password!==r.password&&Object(u["a"])(regeneratorRuntime.mark(function r(){var s;return regeneratorRuntime.wrap(function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.checkLocalUserInDB(e);case 2:s=r.sent,t.setDelayAndRoute(s);case 4:case"end":return r.stop()}},r)}))()},createUserLocal:function(e){localStorage[e.username]=JSON.stringify(e)},checkLocalUserInDB:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(r){var t,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("checkUserInDB",r).then(function(e){return!1===e&&(s.$store.dispatch("createUser",r),!0)});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e,this)}));function r(r){return e.apply(this,arguments)}return r}(),setDelayAndRoute:function(e){var r=this;this.$store.dispatch("getReload",!0),e?setTimeout(function(){r.$router.push("/home"),r.$store.dispatch("getReload",!1)},2e3):this.$store.dispatch("getReload",!1)}}},m=f,v=(t("da41"),t("2877")),h=Object(v["a"])(m,o,i,!1,null,null,null),b=h.exports,g=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"wrap-home"},[e._m(0),0==e.users.length||e.reload?e._e():t("div",{staticClass:"wrap-content"},[t("h1",[e._v("Users")]),t("table",{staticClass:"table table-dark"},[e._m(1),t("tbody",e._l(e.users,function(r){return t("tr",{key:r.id},[t("th",{attrs:{scope:"row"}},[e._v(e._s(r.id))]),t("td",[t("div",{staticClass:"wrap-item"},[e._v(e._s(r.username))])]),t("td",[t("div",{staticClass:"wrap-item"},[e._v(e._s(r.password))])])])}),0)])]),e.reload?t("i",{staticClass:"fa fa-spinner fa-spin fa-3x fa-fw reload"}):e._e(),0!=e.users.length||e.reload?e._e():t("div",{staticClass:"user-not-found"},[t("h2",[e._v("Users not found")])])])},w=[function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"cover"},[t("div",{staticClass:"cover-image home-image"}),t("div",{staticClass:"cover-bg"})])},function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("thead",[t("tr",[t("th",{attrs:{scope:"col"}},[e._v("#")]),t("th",{attrs:{scope:"col"}},[e._v("Username")]),t("th",{attrs:{scope:"col"}},[e._v("Password")])])])}],_={created:function(){this.$store.dispatch("getAllUsers")},computed:{users:function(){return this.$store.getters.users},reload:function(){return this.$store.getters.reload}}},x=_,y=(t("89f1"),Object(v["a"])(x,g,w,!1,null,null,null)),C=y.exports,$=[{path:"/",name:"login",component:b,meta:{title:"User Table - Login"}},{path:"/home",name:"home",component:C,meta:{title:"User Table - Login"}}],k=$,U=k,E=Object(v["a"])(U,s,a,!1,null,null,null),R=E.exports,O=t("5f5b"),j=t("8c4f"),S=t("7bb1"),A=t("8aa5"),D=t.n(A),I=t("2f62"),L=(t("456d"),t("ac6a"),{state:{users:[]},mutations:{setUsers:function(e,r){return e.users=r}},actions:{createUser:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(r,t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=r.commit,s("setClearError"),e.prev=2,e.next=5,D.a.database().ref("users").push(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](2),s("setError",e.t0.message);case 10:case"end":return e.stop()}},e,null,[[2,7]])}));function r(r,t){return e.apply(this,arguments)}return r}(),checkUserInDB:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(r,t){var s,a,n,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=r.commit,s("setClearError"),e.prev=2,e.next=5,D.a.database().ref("users").once("value");case 5:a=e.sent,n=a.val(),e.t0=regeneratorRuntime.keys(n);case 8:if((e.t1=e.t0()).done){e.next=19;break}if(o=e.t1.value,n[o].username!==t.username||n[o].password!==t.password){e.next=14;break}return e.abrupt("return",!0);case 14:if(n[o].username!==t.username||n[o].password===t.password){e.next=17;break}return s("setError"," This user already exists"),e.abrupt("return",!0);case 17:e.next=8;break;case 19:return e.abrupt("return",!1);case 22:e.prev=22,e.t2=e["catch"](2),s("setError",e.t2.message);case 25:case"end":return e.stop()}},e,null,[[2,22]])}));function r(r,t){return e.apply(this,arguments)}return r}(),getAllUsers:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(r){var t,s,a,n,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=r.commit,t("setClearError"),t("setReload",!0),e.prev=3,e.next=6,D.a.database().ref("users").once("value");case 6:s=e.sent,a=s.val()||[],n=[],o=1,Object.keys(a).forEach(function(e){a[e].id=o++,n.push(a[e])}),t("setUsers",n),t("setReload",!1),e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](3),t("setError",e.t0.message),t("setReload",!1);case 19:case"end":return e.stop()}},e,null,[[3,15]])}));function r(r){return e.apply(this,arguments)}return r}()},getters:{users:function(e){return e.users}}}),P={state:{reload:!1,error:null},mutations:{setReload:function(e,r){e.reload=r},setError:function(e,r){e.error=r},setClearError:function(e){e.error=null}},actions:{getReload:function(e,r){var t=e.commit;t("setReload",r)},setError:function(e,r){var t=e.commit;t("setError",r)},clearError:function(e){var r=e.commit;r("setClearError")}},getters:{reload:function(e){return e.reload},error:function(e){return e.error}}};n["default"].use(I["a"]);var z=new I["a"].Store({modules:{auth:L,shared:P}}),T=(t("f9e3"),t("2dd8"),function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{attrs:{id:"app"}},[t("router-view"),e.error?t("div",{staticClass:"alert alert-danger width-lg",on:{click:function(r){return e.handleError()}}},[t("span",{staticClass:"close",attrs:{"data-dismiss":"alert"}},[e._v("Ã—")]),t("strong",[e._v("Error!")]),e._v("\n    "+e._s(e.error)+"\n  ")]):e._e()],1)}),B=[],N={name:"app",computed:{error:function(){return this.$store.getters.error}},methods:{handleError:function(){this.$store.dispatch("clearError")}}},Z=N,J=(t("034f"),Object(v["a"])(Z,T,B,!1,null,null,null)),q=J.exports;n["default"].use(O["a"]),n["default"].use(j["a"]),n["default"].use(S["a"]),n["default"].use(I["a"]),n["default"].component(l.a);var M=new j["a"]({routes:R,mode:"history"});n["default"].config.productionTip=!1,new n["default"]({render:function(e){return e(q)},router:M,store:z,created:function(){A["initializeApp"]({apiKey:"AIzaSyCm1X3gN-wyJHAEzUVsUk9RUFo4s4_i10Y",authDomain:"user-table.firebaseapp.com",databaseURL:"https://user-table.firebaseio.com",projectId:"user-table",storageBucket:"",messagingSenderId:"667317373144",appId:"1:667317373144:web:b2688f3cccff2d8a"})}}).$mount("#app")},"64a9":function(e,r,t){},"89f1":function(e,r,t){"use strict";var s=t("0747"),a=t.n(s);a.a},da41:function(e,r,t){"use strict";var s=t("1cab"),a=t.n(s);a.a}});
//# sourceMappingURL=app.edcc1f18.js.map