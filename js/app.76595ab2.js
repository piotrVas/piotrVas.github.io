(function(e){function t(t){for(var s,o,i=t[0],u=t[1],c=t[2],d=0,f=[];d<i.length;d++)o=i[d],a[o]&&f.push(a[o][0]),a[o]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(e[s]=u[s]);l&&l(t);while(f.length)f.shift()();return n.push.apply(n,c||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],s=!0,i=1;i<r.length;i++){var u=r[i];0!==a[u]&&(s=!1)}s&&(n.splice(t--,1),e=o(o.s=r[0]))}return e}var s={},a={app:0},n=[];function o(t){if(s[t])return s[t].exports;var r=s[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=s,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(r,s,function(t){return e[t]}.bind(null,s));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var l=u;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var s=r("64a9"),a=r.n(s);a.a},"0747":function(e,t,r){},"1cab":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var s,a,n=r("2b0e"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrap-login"},[e._m(0),r("div",{staticClass:"login-window"},[e._m(1),r("div",{staticClass:"login-content"},[r("form",{staticClass:"margin-bottom-0",attrs:{method:"POST"}},[r("div",{staticClass:"form-group m-b-20"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.username,expression:"user.username"},{name:"validate",rawName:"v-validate",value:{required:!0,regex:/^[a-zA-Z]+$/,min:3,max:20},expression:"{required:true, regex: /^[a-zA-Z]+$/, min: 3, max: 20}"}],staticClass:"input form-control",attrs:{id:"username",type:"text",name:"username",placeholder:"Username"},domProps:{value:e.user.username},on:{input:function(t){t.target.composing||e.$set(e.user,"username",t.target.value)}}}),r("span",[e._v(e._s(e.errors.first("username"))),e.errors.first("username")?r("i",[e._v(" (latin letters only)")]):e._e()])]),r("div",{staticClass:"form-group m-b-20"},[r("vue-password",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,regex:/(?=.*[0-9])(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z!@#$%^&*]{8,}/},expression:"{required:true, regex:/(?=.*[0-9])(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z!@#$%^&*]{8,}/}"}],attrs:{name:"password",id:"password",disableStrength:!0,classes:"input form-control","user-inputs":[e.user.username],placeholder:"Password"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),r("span",[e._v(e._s(e.errors.first("password"))),e.errors.first("password")?r("i",[e._v(' (latin letters only, e.g: "aA!@#$%^&*123"; and not less 8 charts)')]):e._e()])],1),r("div",{staticClass:"login-buttons"},[r("button",{staticClass:"btn btn-dark btn-block btn-lg",attrs:{type:"button",disabled:e.reload},on:{click:e.onSubmit}},[e.reload?r("i",{staticClass:"fa fa-spinner fa-pulse"}):r("span",{staticClass:"title-btn"},[e._v("Sign me in")])])])])])])])},i=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cover"},[r("div",{staticClass:"login-image cover-image"}),r("div",{staticClass:"cover-bg"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-header"},[r("h1",[e._v("Login User Table")])])}],u=(r("96cf"),r("3b8d")),c=r("3c29"),l=r.n(c),d=r("0b26"),f=r.n(d),m={components:{VuePassword:c["VuePassword"]},computed:{reload:function(){return this.$store.getters.reload}},data:function(){return{user:{username:"",password:""}}},methods:{onSubmit:function(){var e=this;this.$validator.validate().then(function(t){if(t){e.$store.dispatch("getReload",!0);var r={username:e.user.username,password:f()(e.user.password)};e.checkOrCreateUserInLocalOrDB(r)}else e.$store.dispatch("setError","Not valid form")})},checkOrCreateUserInLocalOrDB:function(e){this.$store.dispatch("clearError"),this.handleAccessToDB(e,this.$router)},handleAccessToDB:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.route=r,e.next=3,this.$store.dispatch("checkUserInDB",t);case 3:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()}},p=m,v=(r("da41"),r("2877")),h=Object(v["a"])(p,o,i,!1,null,null,null),g=h.exports,b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrap-home"},[e._m(0),0==e.users.length||e.reload?e._e():r("div",{staticClass:"wrap-content"},[r("h1",[e._v("Users")]),r("table",{staticClass:"table table-dark"},[e._m(1),r("tbody",e._l(e.users,function(t){return r("tr",{key:t.id},[r("th",{attrs:{scope:"row"}},[e._v(e._s(t.id))]),r("td",[r("div",{staticClass:"wrap-item"},[e._v(e._s(t.username))])]),r("td",[r("div",{staticClass:"wrap-item"},[e._v(e._s(t.password))])])])}),0)])]),e.reload?r("i",{staticClass:"fa fa-spinner fa-spin fa-3x fa-fw reload"}):e._e(),0!=e.users.length||e.reload?e._e():r("div",{staticClass:"user-not-found"},[r("h2",[e._v("Users not found")])]),e._m(2)])},w=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cover"},[r("div",{staticClass:"cover-image home-image"}),r("div",{staticClass:"cover-bg"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("tr",[r("th",{attrs:{scope:"col"}},[e._v("#")]),r("th",{attrs:{scope:"col"}},[e._v("Username")]),r("th",{attrs:{scope:"col"}},[e._v("Password")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{position:"relative","min-height":"200px"},attrs:{"aria-live":"polite","aria-atomic":"true"}},[r("div",{staticClass:"toast",staticStyle:{position:"absolute",top:"0",right:"0"}},[r("div",{staticClass:"toast-header"},[r("img",{staticClass:"rounded mr-2",attrs:{src:"",alt:"..."}}),r("strong",{staticClass:"mr-auto"},[e._v("Bootstrap")]),r("small",[e._v("11 mins ago")]),r("button",{staticClass:"ml-2 mb-1 close",attrs:{type:"button","data-dismiss":"toast","aria-label":"Close"}},[r("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])]),r("div",{staticClass:"toast-body"},[e._v("\n                Hello, world! This is a toast message.\n            ")])])])}],_={created:function(){this.$store.dispatch("getAllUsers"),this.makeToast("secondary")},computed:{users:function(){return this.$store.getters.users},reload:function(){return this.$store.getters.reload},greeting:function(){return this.$store.getters.greeting}},methods:{makeToast:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.$bvToast.toast("".concat(this.greeting),{title:"Notifications",variant:e,solid:!0})}},beforeDestroy:function(){this.$store.dispatch("setGreeting","")}},y=_,C=(r("89f1"),Object(v["a"])(y,b,w,!1,null,null,null)),x=C.exports,$=[{path:"/",name:"login",component:g,meta:{title:"User Table - Login"}},{path:"/home",name:"home",component:x,meta:{title:"User Table - Login"}}],k=$,E=k,O=Object(v["a"])(E,s,a,!1,null,null,null),R=O.exports,U=r("5f5b"),j=r("8c4f"),A=r("7bb1"),S=r("59ca"),T=r.n(S),P=r("2f62"),D=(r("456d"),r("ac6a"),r("66ce"),{state:{users:[]},mutations:{setUsers:function(e,t){return e.users=t}},actions:{createUser:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t,r){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=t.commit,s("setClearError"),e.prev=2,r.route&&delete r.route,e.next=6,T.a.database().ref("users").push(r);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](2),s("setError",e.t0.message);case 11:case"end":return e.stop()}},e,null,[[2,8]])}));function t(t,r){return e.apply(this,arguments)}return t}(),checkUserInDB:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t,r){var s,a,n,o,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=t.commit,a=t.dispatch,s("setClearError"),e.prev=2,e.next=5,T.a.database().ref("users").once("value");case 5:n=e.sent,o=n.val(),e.t0=regeneratorRuntime.keys(o);case 8:if((e.t1=e.t0()).done){e.next=21;break}if(i=e.t1.value,o[i].username!==r.username||o[i].password!==r.password){e.next=17;break}return a("setDelayAndRoute",r.route),a("setUserInLocal",r),s("setGreeting","Nice to see You again, ".concat(r.username)),e.abrupt("return");case 17:if(o[i].username!==r.username||o[i].password===r.password){e.next=19;break}throw{message:"This user name already exists"};case 19:e.next=8;break;case 21:a("setDelayAndRoute",r.route),a("createUser",r),a("setUserInLocal",r),s("setGreeting","Welcome, ".concat(r.username)),e.next=31;break;case 27:e.prev=27,e.t2=e["catch"](2),s("setError",e.t2.message),s("setReload",!1);case 31:case"end":return e.stop()}},e,null,[[2,27]])}));function t(t,r){return e.apply(this,arguments)}return t}(),getAllUsers:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t){var r,s,a,n,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,r("setClearError"),r("setReload",!0),e.prev=3,e.next=6,T.a.database().ref("users").once("value");case 6:s=e.sent,a=s.val()||[],n=[],o=1,Object.keys(a).forEach(function(e){a[e].id=o++,n.push(a[e])}),r("setUsers",n),r("setReload",!1),e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](3),r("setError",e.t0.message),r("setReload",!1);case 19:case"end":return e.stop()}},e,null,[[3,15]])}));function t(t){return e.apply(this,arguments)}return t}(),setUserInLocal:function(e,t){var r=e.commit;try{t.route&&delete t.route,localStorage[t.username]=JSON.stringify(t)}catch(s){r("setError",s.message)}}},getters:{users:function(e){return e.users}}}),I={state:{reload:!1,error:null,greeting:""},mutations:{setReload:function(e,t){e.reload=t},setError:function(e,t){e.error=t},setClearError:function(e){e.error=null},setGreeting:function(e,t){e.greeting=t}},actions:{getReload:function(e,t){var r=e.commit;r("setReload",t)},setError:function(e,t){var r=e.commit;r("setError",t)},clearError:function(e){var t=e.commit;t("setClearError")},setDelayAndRoute:function(e,t){var r=e.commit;r("setReload",!0),setTimeout(function(){t.push("/home"),r("setReload",!1)},2e3)},setGreeting:function(e,t){var r=e.commit;r("setGreeting",t)}},getters:{reload:function(e){return e.reload},error:function(e){return e.error},greeting:function(e){return e.greeting}}};n["default"].use(P["a"]);var z=new P["a"].Store({modules:{auth:D,shared:I}}),L=(r("f9e3"),r("2dd8"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view"),e.error?r("div",{staticClass:"alert alert-danger width-lg",on:{click:function(t){return e.handleError()}}},[r("span",{staticClass:"close",attrs:{"data-dismiss":"alert"}},[e._v("×")]),r("strong",[e._v("Error!")]),e._v("\n    "+e._s(e.error)+"\n  ")]):e._e()],1)}),B=[],N={name:"app",computed:{error:function(){return this.$store.getters.error}},methods:{handleError:function(){this.$store.dispatch("clearError")}}},G=N,Z=(r("034f"),Object(v["a"])(G,L,B,!1,null,null,null)),q=Z.exports;n["default"].use(U["a"]),n["default"].use(j["a"]),n["default"].use(A["a"]),n["default"].use(P["a"]),n["default"].component(l.a);var J=new j["a"]({routes:R,mode:"history"});n["default"].config.productionTip=!1,new n["default"]({render:function(e){return e(q)},router:J,store:z,created:function(){S["initializeApp"]({apiKey:"AIzaSyCm1X3gN-wyJHAEzUVsUk9RUFo4s4_i10Y",authDomain:"user-table.firebaseapp.com",databaseURL:"https://user-table.firebaseio.com",projectId:"user-table",storageBucket:"",messagingSenderId:"667317373144",appId:"1:667317373144:web:b2688f3cccff2d8a"})}}).$mount("#app")},"64a9":function(e,t,r){},"89f1":function(e,t,r){"use strict";var s=r("0747"),a=r.n(s);a.a},da41:function(e,t,r){"use strict";var s=r("1cab"),a=r.n(s);a.a}});
//# sourceMappingURL=app.76595ab2.js.map